/** the theme is based on @angular/material */
@mixin editor-theme($theme) {
    $primary: map-get($theme, primary);
    $accent: map-get($theme, accent);
    $warn: map-get($theme, warn);
    $background: map-get($theme, background);
    $foreground: map-get($theme, foreground);
    $is-dark-theme: map-get($theme, is-dark);

    editor {
        .ql-editor {
            color: mat-color($foreground, text);

            &.ql-blank {
                &::before {
                    color: mat-color($foreground, secondary-text, if($is-dark-theme, 0.5, 0.42));
                }
            }
        }

        .ng-untouched {
            &.ng-valid {
                .ql-editor {
                    border-bottom: 1px solid mat-color($foreground, text, 0.42);
                }
            }
        }

        .ng-touched {
            &.ng-valid {
                .ql-editor {
                    border-bottom: 2px solid mat-color($primary);
                }
            }

            &.ng-invalid {
                .ql-editor {
                    border-bottom: 1px solid mat-color($warn);
                }
            }
        }

        .error {
            color: mat-color($warn);
        }

        .ql-toolbar.ql-snow {
            background: mat-color($foreground, text, 0.1);
            border-color: mat-color($foreground, text, 0.2);

            .ql-picker.ql-expanded {
                .ql-picker-options,
                .ql-picker-label {
                    border-color: mat-color($foreground, text, 0.2);
                    outline: 0;
                }
            }
        }

        .ql-snow {
            .ql-stroke {
                stroke: mat-color($foreground, text);
            }

            .ql-fill,
            .ql-stroke.ql-fill {
                fill: mat-color($foreground, text);
            }

            .ql-picker {
                color: mat-color($foreground, text);
            }

            .ql-picker-options {
                background-color: mat-color($background, dialog);
            }

            .ql-tooltip {
                background-color: mat-color($background, dialog);
                color: mat-color($foreground, text);
                border-color: mat-color($foreground, text, 0.2);

                input[type="text"] {
                    @extend .ql-tooltip;
                    outline: 0;
                }
            }

            &.ql-toolbar button:hover,
            .ql-toolbar button:hover,
            &.ql-toolbar button:focus,
            .ql-toolbar button:focus,
            &.ql-toolbar button.ql-active,
            .ql-toolbar button.ql-active,
            &.ql-toolbar .ql-picker-label:hover,
            .ql-toolbar .ql-picker-label:hover,
            &.ql-toolbar .ql-picker-label.ql-active,
            .ql-toolbar .ql-picker-label.ql-active,
            &.ql-toolbar .ql-picker-item:hover,
            .ql-toolbar .ql-picker-item:hover,
            &.ql-toolbar .ql-picker-item.ql-selected,
            .ql-toolbar .ql-picker-item.ql-selected {
                color: mat-color($primary) !important;
            }

            &.ql-toolbar button:hover .ql-stroke,
            .ql-toolbar button:hover .ql-stroke,
            &.ql-toolbar button:focus .ql-stroke,
            .ql-toolbar button:focus .ql-stroke,
            &.ql-toolbar button.ql-active .ql-stroke,
            .ql-toolbar button.ql-active .ql-stroke,
            &.ql-toolbar .ql-picker-label:hover .ql-stroke,
            .ql-toolbar .ql-picker-label:hover .ql-stroke,
            &.ql-toolbar .ql-picker-label.ql-active .ql-stroke,
            .ql-toolbar .ql-picker-label.ql-active .ql-stroke,
            &.ql-toolbar .ql-picker-item:hover .ql-stroke,
            .ql-toolbar .ql-picker-item:hover .ql-stroke,
            &.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
            .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
            &.ql-toolbar button:hover .ql-stroke-miter,
            .ql-toolbar button:hover .ql-stroke-miter,
            &.ql-toolbar button:focus .ql-stroke-miter,
            .ql-toolbar button:focus .ql-stroke-miter,
            &.ql-toolbar button.ql-active .ql-stroke-miter,
            .ql-toolbar button.ql-active .ql-stroke-miter,
            &.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
            .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
            &.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
            .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
            &.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
            .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
            &.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,
            .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {
                stroke: mat-color($primary) !important;
            }

            &.ql-toolbar button:hover .ql-fill,
            .ql-toolbar button:hover .ql-fill,
            &.ql-toolbar button:focus .ql-fill,
            .ql-toolbar button:focus .ql-fill,
            &.ql-toolbar button.ql-active .ql-fill,
            .ql-toolbar button.ql-active .ql-fill,
            &.ql-toolbar .ql-picker-label:hover .ql-fill,
            .ql-toolbar .ql-picker-label:hover .ql-fill,
            &.ql-toolbar .ql-picker-label.ql-active .ql-fill,
            .ql-toolbar .ql-picker-label.ql-active .ql-fill,
            &.ql-toolbar .ql-picker-item:hover .ql-fill,
            .ql-toolbar .ql-picker-item:hover .ql-fill,
            &.ql-toolbar .ql-picker-item.ql-selected .ql-fill,
            .ql-toolbar .ql-picker-item.ql-selected .ql-fill,
            &.ql-toolbar button:hover .ql-stroke.ql-fill,
            .ql-toolbar button:hover .ql-stroke.ql-fill,
            &.ql-toolbar button:focus .ql-stroke.ql-fill,
            .ql-toolbar button:focus .ql-stroke.ql-fill,
            &.ql-toolbar button.ql-active .ql-stroke.ql-fill,
            .ql-toolbar button.ql-active .ql-stroke.ql-fill,
            &.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
            .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
            &.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
            .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
            &.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
            .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
            &.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,
            .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {
                fill: mat-color($primary) !important;
            }

            .ql-picker-label {
                &:hover {
                    color: mat-color($primary) !important;
                }
            }
        }
    }
}
